<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Date Calculator</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Menlo', monospace;
            background-image: linear-gradient(to right bottom, #222831, #262b34, #292f38, #2d323b, #31363f);
            background-size: cover;
            background-attachment: fixed;
            font-size: 1.15em;
        }
        .calculator {
            max-width: 400px;
            padding: 20px;
            background: #37414F;
            border-radius: 12px;
            box-shadow:
                0 1px 1px hsl(0deg 0% 0% / 0.075),
                0 2px 2px hsl(0deg 0% 0% / 0.075),
                0 4px 4px hsl(0deg 0% 0% / 0.075),
                0 8px 8px hsl(0deg 0% 0% / 0.075),
                0 16px 16px hsl(0deg 0% 0% / 0.075);
            color: #76ABAE;
            text-align: center;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            border: 1px solid #76ABAE;
            border-radius: 4px;
            box-sizing: border-box;
            background: #222831;
            color: #76ABAE;
            appearance: none;
            font-family: 'Menlo', monospace;
            position: relative;
        }
        #businessDays {
            color: #76ABAE;
            background: #222831;
        }
        #businessDays::placeholder {
            color: #37414F;
        }
        .dropdown-arrow, .hamburger-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
        .dropdown-arrow {
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #76ABAE;
        }
        .hamburger-icon {
            width: 16px;
            height: 16px;
        }
        .hamburger-icon div {
            width: 100%;
            height: 2px;
            background: #76ABAE;
            margin: 2px 0;
        }
        button {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            background-color: #76ABAE;
            color: #2a2a2b;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Menlo', monospace;
        }
        button:hover {
            background-color: #6c9e8e;
        }
        h1 {
            margin: 10px 0;
            white-space: nowrap;
            font-size: 1.15em;
        }
        #result {
            color: #31363F;
            margin-top: 10px;
            background: #EEEEEE;
        }
        .result-field {
            background: #EEEEEE;
            color: #31363F;
            border: none;
            padding: 12px;
            width: 100%;
            text-align: center;
            cursor: pointer;
        }
        .copy-message {
            position: absolute;
            background: #76AE8D;
            color: white;
            padding: 10px;
            border-radius: 4px;
            display: none;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1>Business Date Calculator</h1>
        <div style="position: relative;">
            <select id="serviceType">
                <option value="expressPaid">Express (Paid)</option>
                <option value="expressFree">Express (Free)</option>
                <option value="standard">Standard</option>
                <option value="economy">Economy</option>
                <option value="collection">Collection</option>
            </select>
            <div class="dropdown-arrow"></div>
        </div>
        <div style="position: relative;">
            <select id="countrySelect">
                <!-- Options will be populated dynamically -->
            </select>
            <div class="dropdown-arrow"></div>
        </div>
        <div style="position: relative;">
            <input type="date" id="startDate" required>
            <div class="hamburger-icon">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <input type="text" id="businessDays" placeholder="Business Days" required>
        <button id="calculateButton">Calculate</button>
        <input type="text" id="result" class="result-field" readonly>
        <div id="copyMessage" class="copy-message">Copied!</div>
    </div>

<script>
    const countryOptions = {
        expressPaid: [
            "United States", "Canada", "Australia", "Mexico", "United Kingdom", "Brazil", 
            "New Zealand", "Austria", "Belgium", "Bulgaria", "Croatia", "Cyprus", 
            "Czech Republic", "Denmark", "Estonia", "Finland", "France", "Germany", 
            "Greece", "Hungary", "Ireland", "Italy", "Latvia", "Lithuania", 
            "Luxembourg", "Malta", "Netherlands", "Poland", "Portugal", "Romania", 
            "Slovakia", "Slovenia", "Spain", "Sweden"
        ],
        expressFree: ["Japan", "South Korea"],
        economy: ["United States"],
        standard: [
            "United States", "New Zealand", "Austria", "Bosnia and Herzegovina", 
            "Belgium", "Bulgaria", "Croatia", "Czech Republic", "Denmark", 
            "Estonia", "Finland", "France", "Germany", "Greece", "Hungary", 
            "Ireland", "Italy", "Lithuania", "Luxembourg", "Latvia", 
            "Netherlands", "Norway", "Poland", "Portugal", "Romania", 
            "Slovenia", "Slovakia", "Spain", "Sweden", "Switzerland", 
            "United Kingdom", "Brunei", "Hong Kong", "Indonesia", "Macau", 
            "Malaysia", "Philippines", "Singapore", "Thailand", "Taiwan", 
            "Vietnam", "Anguilla", "Antigua and Barbuda", "Aruba", "Barbados", 
            "Bermuda", "Bonaire", "Cayman Islands", "Curaçao", "Dominica", 
            "Dominican Republic", "Greenland", "Grenada", "Guadeloupe", 
            "Haiti", "Jamaica", "Martinique", "Montserrat", "Puerto Rico", 
            "Saint Barthélemy", "Saint Kitts and Nevis", "Saint Lucia", 
            "Saint Martin", "Saint Pierre and Miquelon", "Saint Vincent and the Grenadines", 
            "Sint Maarten", "Bahamas", "Trinidad and Tobago", "Turks and Caicos Islands", 
            "British Virgin Islands", "U.S. Virgin Islands", "Belize", "Bolivia", 
            "Chile", "Colombia", "Costa Rica", "Ecuador", "El Salvador", 
            "Falkland Islands", "French Guiana", "Guatemala", "Guyana", 
            "Honduras", "Nicaragua", "Panama", "Paraguay", "Peru", 
            "South Georgia and the South Sandwich Islands", "Suriname", 
            "Uruguay", "Venezuela"
        ],
        collection: ["United States", "Canada"],
    };

    function populateCountries() {
        const countrySelect = document.getElementById('countrySelect');
        const selectedService = document.getElementById('serviceType').value;
        const countries = countryOptions[selectedService];

        countrySelect.innerHTML = ''; // Clear existing options
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
        });
    }

    document.getElementById('serviceType').addEventListener('change', populateCountries);

    async function fetchHolidays(year, country) {
        try {
            const response = await fetch(`https://date.nager.at/Api/v2/PublicHolidays/${year}/${country}`);
            const data = await response.json();
            return data.map(holiday => new Date(holiday.date).toISOString().split('T')[0]);
        } catch (error) {
            console.error('Error fetching holidays:', error);
            return [];
        }
    }

    async function calculateBusinessDate() {
        const startDateInput = document.getElementById('startDate').value;
        const businessDaysInput = document.getElementById('businessDays').value;
        const selectedCountry = document.getElementById('countrySelect').value;

        const startDate = new Date(startDateInput);
        const holidays = await fetchHolidays(startDate.getFullYear(), selectedCountry);

        let currentDate = startDate;
        let daysAdded = 0;
        const resultDates = [];

        while (daysAdded < businessDaysInput) {
            currentDate.setDate(currentDate.getDate() + 1);
            const dayOfWeek = currentDate.getDay();

            if (dayOfWeek !== 0 && dayOfWeek !== 6 && !holidays.includes(currentDate.toISOString().split('T')[0])) {
                resultDates.push(`${currentDate.toLocaleString('default', { month: 'long' })} ${currentDate.getDate()} ${currentDate.getFullYear()}`);
                daysAdded++;
            }
        }

        document.getElementById('result').value = resultDates.join(", ");
    }

    document.getElementById('calculateButton').addEventListener('click', calculateBusinessDate);

    document.getElementById('result').addEventListener('click', () => {
        const resultField = document.getElementById('result');
        navigator.clipboard.writeText(resultField.value).then(() => {
            const copyMessage = document.getElementById('copyMessage');
            copyMessage.style.display = 'block';
            copyMessage.style.top = `${resultField.getBoundingClientRect().top + window.scrollY - 40}px`;
            copyMessage.style.left = `${resultField.getBoundingClientRect().left + window.scrollX}px`;

            setTimeout(() => {
                copyMessage.style.display = 'none';
            }, 2000);
        });
    });
</script>
</body>
</html>
